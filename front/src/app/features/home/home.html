<nav class="navbar">
  <div class="logo">YourCarYourWay</div>

  <div class="user-section">
    @if (authService.currentUser$ | async; as user) {
      <div class="user-info">
        <span class="user-name">{{ user.firstName }}</span>
        <span class="role-badge">{{ user.role === 'ROLE_USER' ? 'Client' : 'Agent' }}</span>
      </div>
      
      <button (click)="onLogout()" class="logout-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
        DÃ©connexion
      </button>
    }
  </div>
</nav>

<main class="main-content-fluid"> 
  @if (authService.currentUser$ | async; as user) {
    @if (user.role === 'ROLE_AGENT') {
      <div class="agent-container">
        <aside class="sidebar">
          <div class="sidebar-header">
            <h3>Messages</h3>
            <span class="online-status">En ligne</span>
          </div>
          
          <div class="conv-list">
            <div class="conv-item active">
              <div class="avatar">M</div>
              <div class="conv-text">
                <span class="name">Micka (Client)</span>
                <p class="preview">Bonjour, j'ai besoin d'aide...</p>
              </div>
            </div>
          </div>
        </aside>

        <section class="chat-viewport">
          <div class="messages-list">
            <div class="message incoming">
              <p>Bonjour ! Comment se passe la location ?</p>
            </div>
            <div class="message outgoing">
              <p>Bonjour, tout va bien merci.</p>
            </div>
          </div>

          <div class="chat-controls">
            <input type="text" placeholder="RÃ©pondre au client...">
            <button class="btn-send">Envoyer</button>
          </div>
        </section>
      </div>
    }
    @else if (user.role === 'ROLE_USER') {
      <div class="client-home">
        <div class="hero-section">
          <h1>Bienvenue chez YourCarYourWay</h1>
          <p>Besoin d'aide ou d'informations sur votre rÃ©servation ?</p>
        </div>
        <div class="chat-trigger-container">
          <div class="chat-card">
            <div class="chat-icon">ðŸ’¬</div>
            <h3>Assistance en direct</h3>
            <p>Discutez instantanÃ©ment avec l'un de nos agents.</p>
            <button class="btn-open-chat">DÃ©marrer la discussion</button>
          </div>
        </div>
      </div>
    }
  } @else {
    <div class="loading">Initialisation de la session...</div>
  }
</main>